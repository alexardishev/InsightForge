# ‚ö° InsightForge

InsightForge ‚Äî —ç—Ç–æ –º–æ—â–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–π (–≤—å—é—Ö) –∏–∑ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö.
–ü–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–±–∏—Ä–∞—Ç—å —Ç–∞–±–ª–∏—Ü—ã, –æ–±—ä–µ–¥–∏–Ω—è—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ —Ä–∞–∑–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤, –ø—Ä–∏–º–µ–Ω—è—Ç—å —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏ –∏ —Ö—Ä–∞–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–æ–º —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (DWH).

## ‚ùì –ö–∞–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Ä–µ—à–∞–µ—Ç
–í —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö –¥–∞–Ω–Ω—ã–µ —Ä–∞–∑–±—Ä–æ—Å–∞–Ω—ã –ø–æ —Ä–∞–∑–Ω—ã–º –±–∞–∑–∞–º –∏ —Å—Ö–µ–º–∞–º. –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ —Ç—Ä–µ–±—É–µ—Ç —Å–≤–æ–¥–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü, –∫–æ—Ç–æ—Ä—ã–µ —á–∞—Å—Ç–æ —Å–æ–±–∏—Ä–∞—é—Ç—Å—è –≤—Ä—É—á–Ω—É—é —Å –ø–æ–º–æ—â—å—é —Å–ª–æ–∂–Ω—ã—Ö ETL‚Äë—Å–∫—Ä–∏–ø—Ç–æ–≤. InsightForge –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä—É–µ—Ç —ç—Ç–æ—Ç –ø—Ä–æ—Ü–µ—Å—Å: –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç —Ä–∞–∑–Ω–æ—Ä–æ–¥–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏, –ø—Ä–∏–º–µ–Ω—è–µ—Ç —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏ –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤—å—é—Ö–∏ –≤ –∞–∫—Ç—É–∞–ª—å–Ω–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏, –∏–∑–±–∞–≤–ª—è—è –æ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø–∏—Å–∞—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ ETL –ø–∞–π–ø–ª–∞–π–Ω—ã.

![ChatGPT Image 11 –∞–ø—Ä  2025 –≥ , 12_25_40 (1)](https://github.com/user-attachments/assets/36cdafa8-a9b5-4524-b09b-941059bd7ed8)

---

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üì¶ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤–Ω–µ—à–Ω–∏–º–∏ OLTP —Å–∏—Å—Ç–µ–º–∞–º–∏ —á–µ—Ä–µ–∑ API –∏ —Å–æ–±—ã—Ç–∏—è
- üõ† –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –≤—å—é: —Ç–∞–±–ª–∏—Ü—ã, –∫–æ–ª–æ–Ω–∫–∏, —Å–≤—è–∑–∏ (JOIN), —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏
- üíæ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ PostgreSQL –∫–∞–∫ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –∏ DWH, –∞ —Ç–∞–∫–∂–µ ClickHouse –≤ —Ä–æ–ª–∏ DWH
- üîÑ –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ CDC (Debezium) –∏–ª–∏ —Å–æ–±—ã—Ç–∏—è–º
- üß† –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö: enum, alias, text mappings –∏ –¥—Ä.
- üß™ –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è ETL-–æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ–º —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–¥–∞—á
- üìä –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –º–µ—Ç—Ä–∏–∫–∏ (OpenTelemetry-ready)
- ‚ö†Ô∏è *–ù–∞ —Ç–µ–∫—É—â–∏–π –º–æ–º–µ–Ω—Ç UI –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ.*
     üõà *–ü—Ä–∏ —ç—Ç–æ–º —É –≤–∞—Å —É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –±—ç–∫–µ–Ω–¥–∞ –∏ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º INSERT –≤ —Å–∏—Å—Ç–µ–º–Ω—É—é —Ç–∞–±–ª–∏—Ü—É Schems –ø–æ –ø—Ä–∏–º–µ—Ä—É, —É–∫–∞–∑–∞–Ω–Ω–æ–º—É –Ω–∏–∂–µ.*
---

## üß± –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

- `analytics-view-service` ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–∏—Å –¥–ª—è —Å–±–æ—Ä–∫–∏ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤—å—é—Ö
- `task-service` ‚Äî –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤ ETL-–ø—Ä–æ—Ü–µ—Å—Å–æ–≤
- `sql-generator` ‚Äî –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä SQL-—Å–∫—Ä–∏–ø—Ç–æ–≤ (CREATE TABLE, INSERT –∏ —Ç.–¥.)
- `cdc-listener` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) ‚Äî —Å–ª—É—à–∞–µ—Ç Kafka –∏ —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è
- `config-loader` ‚Äî –∑–∞–≥—Ä—É–∑–∫–∞ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –≤—å—é—Ö–∏ (YAML/JSON)

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
```
analytics-data-center/
‚îú‚îÄ‚îÄ cmd/                      # –¢–æ—á–∫–∏ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ internal/
‚îÇ   ‚îú‚îÄ‚îÄ app/                  # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ config/               # –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ domain/models/        # –û—Å–Ω–æ–≤–Ω—ã–µ –¥–æ–º–µ–Ω–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏
‚îÇ   ‚îú‚îÄ‚îÄ services/             # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ storage/              # –†–∞–±–æ—Ç–∞ —Å –ë–î
‚îÇ   ‚îî‚îÄ‚îÄ lib/                  # –£—Ç–∏–ª–∏—Ç—ã (SQL –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä, –¥—É–±–ª–∏–∫–∞—Ç—ã)
‚îú‚îÄ‚îÄ config/                   # YAML –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ go.mod
‚îî‚îÄ‚îÄ README.md
```

---

## üèó –ü—Ä–∏–º–µ—Ä –≤—å—é—Ö–∏ (JSON)

```json
{
  "view_name": "user_basic_info"
  "joins": [
    {
      "inner": {
        "main_table": "users",
        "source": "postgres",
        "schema": "public",
        "table": "profiles",
        "column_first": "id",
        "column_second": "user_id"
      }
    }
  ],
  "sources": [
    {
      "name": "postgres",
      "schemas": [
        {
          "name": "public",
          "tables": [
            {
              "name": "users",
              "columns": [
                {
                  "name": "id",
                  "type": "uuid",
                  "view_key": "user_id",
                  "is_nullable": true,
                  "is_update_key": true,
                  "is_primary_key": true
                },
                {
                  "name": "email",
                  "type": "text",
                  "is_nullable": true
                },
                {
                  "name": "json_transform",
                  "type": "jsonb",
                  "is_nullable": true,
                  "transform": {
                    "type": "JSON",
                    "mode": "Mapping",
                    "output_column": "json_transform",
                    "mapping": {
                      "type_map": "JSON",
                      "mapping_json": [
                        {
                          "type_field": "int",
                          "mapping": {
                            "field1_in_json": "field1_view_column"
                          }
                        },
                        {
                          "type_field": "text",
                          "mapping": {
                            "field2_in_json": "field2_view_column"
                          }
                        }
                      ]
                    }
                  }
                },
                {
                  "name": "status",
                  "type": "int",
                  "transform": {
                    "type": "FieldTransform",
                    "mode": "Mapping",
                    "output_column": "status_label",
                    "mapping": {
                      "type_map": "FieldTransform",
                      "alias_new_column_transform": "status_label",
                      "mapping": {
                        "1": "–°–æ–∑–¥–∞–Ω",
                        "2": "–í –æ–±—Ä–∞–±–æ—Ç–∫–µ",
                        "3": "–ó–∞–≤–µ—Ä—à–µ–Ω"
                      }
                    }
                  }
                }
              ]
            },
            {
              "name": "profiles",
              "columns": [
                {
                  "name": "user_id",
                  "type": "uuid",
                  "view_key": "id",
                  "is_update_key": true,
                  "is_primary_key": true
                },
                {
                  "name": "age",
                  "type": "int",
                  "is_nullable": true
                },
                {
                  "name": "test",
                  "type": "varchar",
                  "is_deleted": true,
                  "is_nullable": true
                }
              ]
            }
          ]
        }
      ]
    }
  ]
}
```

–ü–æ–ª–Ω—ã–π –ø—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –∫–∞—Ç–∞–ª–æ–≥–µ `examples/user_basic_info.json`.

## üîç –ü–æ—è—Å–Ω–µ–Ω–∏–µ –∫ –∫–ª—é—á–∞–º JSON-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- **`view_name`** ‚Äî –Ω–∞–∑–≤–∞–Ω–∏–µ –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è (–∏—Ç–æ–≥–æ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞).

- **`main_table`** ‚Äî –æ—Å–Ω–æ–≤–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞, –∫ –∫–æ—Ç–æ—Ä–æ–π –±—É–¥—É—Ç –ø—Ä–∏—Å–æ–µ–¥–∏–Ω—è—Ç—å—Å—è –æ—Å—Ç–∞–ª—å–Ω—ã–µ. –ï—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω–∞, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–µ—Ä–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞ –∏–∑ —Å–ø–∏—Å–∫–∞.

- **`sources`** ‚Äî –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö:
  - **`name`** ‚Äî –∏–º—è –∏—Å—Ç–æ—á–Ω–∏–∫–∞, –æ–±—ã—á–Ω–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –∏–º–µ–Ω–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.
  - **`schemas`** ‚Äî —Å–ø–∏—Å–æ–∫ —Å—Ö–µ–º, –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö –±–µ—Ä—É—Ç—Å—è —Ç–∞–±–ª–∏—Ü—ã.
  - **`tables`** ‚Äî —Å–ø–∏—Å–æ–∫ —Ç–∞–±–ª–∏—Ü, —É—á–∞—Å—Ç–≤—É—é—â–∏—Ö –≤ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–∏ –≤—å—é—Ö–∏:
    - **`columns`** ‚Äî —Å–ø–∏—Å–æ–∫ –∫–æ–ª–æ–Ω–æ–∫ –≤ —Ç–∞–±–ª–∏—Ü–µ:
      - **`name`** ‚Äî –∏–º—è –∫–æ–ª–æ–Ω–∫–∏ –≤ –∏—Å—Ö–æ–¥–Ω–æ–π —Ç–∞–±–ª–∏—Ü–µ.
      - **`type`** ‚Äî —Ç–∏–ø –¥–∞–Ω–Ω—ã—Ö.
      - **`view_key`** ‚Äî –∏–º—è –∫–ª—é—á–∞ –≤ –∏—Ç–æ–≥–æ–≤–æ–º –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–∏, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ —Å–æ–±—ã—Ç–∏—è–º. –ú–æ–∂–µ—Ç –∑–∞–¥–∞–≤–∞—Ç—å—Å—è –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∑–∞–∏–º–æ–∑–∞–º–µ–Ω—è–µ–º—ã—Ö –∫–ª—é—á–µ–π, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –∫–æ–ª–ª–∏–∑–∏–π –ø—Ä–∏ –Ω–µ—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö —Å–æ–±—ã—Ç–∏—è—Ö.
      - **`is_update_key`** ‚Äî —É—á–∞—Å—Ç–≤—É–µ—Ç –ª–∏ –∫–æ–ª–æ–Ω–∫–∞ –≤ –ª–æ–≥–∏–∫–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö.
      - **`is_primary_key`** ‚Äî —á–∞—Å—Ç—å –ª–∏ –∫–æ–ª–æ–Ω–∫–∞ –ø–µ—Ä–≤–∏—á–Ω–æ–≥–æ –∫–ª—é—á–∞ –≤ –∏—Ç–æ–≥–æ–≤–æ–π –≤—å—é—Ö–µ.
      - **`is_nullable`** ‚Äî –¥–æ–ø—É—Å–∫–∞–µ—Ç –ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ `NULL`.  
        ‚ö†Ô∏è *–ù–∞ —Ç–µ–∫—É—â–∏–π –º–æ–º–µ–Ω—Ç –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è ‚Äî –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –Ω–µ –º–∏–≥—Ä–∏—Ä—É—é—Ç—Å—è –∏–∑ OLTP-—Ç–∞–±–ª–∏—Ü.*
      - **`is_deleted`** ‚Äî –∫–æ–ª–æ–Ω–∫–∞ —Å—á–∏—Ç–∞–µ—Ç—Å—è —É–¥–∞–ª—ë–Ω–Ω–æ–π, –µ—Å–ª–∏ —Ñ–∏–∑–∏—á–µ—Å–∫–∏ –∏—Å—á–µ–∑–ª–∞ –∏–∑ OLTP-—Ö—Ä–∞–Ω–∏–ª–∏—â–∞.
        üõà *–ü—Ä–∏ —ç—Ç–æ–º –æ–Ω–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –≤—å—é—Ö–µ –∏ –Ω–∞—á–∏–Ω–∞–µ—Ç –∑–∞–ø–æ–ª–Ω—è—Ç—å—Å—è `NULL`-–∑–Ω–∞—á–µ–Ω–∏—è–º–∏ ‚Äî —ç—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ç—Å–ª–µ–¥–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –±–µ–∑ –Ω–∞—Ä—É—à–µ–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã.*
      - **`alias`** ‚Äî –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ–µ –∏–º—è –∫–æ–ª–æ–Ω–∫–∏ –≤ —Ä–µ–∑—É–ª—å—Ç–∏—Ä—É—é—â–µ–π –≤—å—é—Ö–µ.
      - **`reference`** ‚Äî —Å—Å—ã–ª–∫–∞ –Ω–∞ —Å—Ç–æ–ª–±–µ—Ü –¥—Ä—É–≥–æ–π —Ç–∞–±–ª–∏—Ü—ã, –≤–∫–ª—é—á–∞–µ—Ç –ø–æ–ª—è `source`, `schema`, `table`, `column`.
      - **`transform`** ‚Äî –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö:
        - **`type`** ‚Äî —Ç–∏–ø —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏ (`JSON`, `FieldTransform` –∏ –¥—Ä.).
        - **`mode`** ‚Äî —Ä–µ–∂–∏–º —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `Mapping`, `Alias`).
        - **`output_column`** ‚Äî –∏–º—è –∫–æ–ª–æ–Ω–∫–∏ –≤ —Ä–µ–∑—É–ª—å—Ç–∏—Ä—É—é—â–µ–π –≤—å—é—Ö–µ.
        - **`mapping`** ‚Äî –ª–æ–≥–∏–∫–∞ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è, –Ω–∞–ø—Ä–∏–º–µ—Ä:
          - –¥–ª—è `FieldTransform`: `1 ‚Üí –°–æ–∑–¥–∞–Ω`, `2 ‚Üí –í —Ä–∞–±–æ—Ç–µ`
          - –¥–ª—è `JSON`: –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –ø–æ –∫–ª—é—á–∞–º
        - **`mapping.type_map`** ‚Äî —Ç–∏–ø –æ–ø–∏—Å–∞–Ω–∏—è —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è (`JSON` –∏–ª–∏ `FieldTransform`).
        - **`mapping.mapping`** ‚Äî –Ω–∞–±–æ—Ä `–∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ –ë–î ‚Üí –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ`.
        - **`mapping.alias_new_column_transform`** ‚Äî –∏–º—è –Ω–æ–≤–æ–π –∫–æ–ª–æ–Ω–∫–∏ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–µ–π.
        - **`mapping.type_field`** ‚Äî —Ç–∏–ø –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ JSON.
        - **`mapping.mapping_json`** ‚Äî —Å–ø–∏—Å–æ–∫ –æ–±—ä–µ–∫—Ç–æ–≤ –≤–∏–¥–∞ `–∫–ª—é—á –≤ JSON ‚Üí –∏–º—è –∫–æ–ª–æ–Ω–∫–∏`.

- **`joins`** ‚Äî –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è —Ç–∞–±–ª–∏—Ü:
  - **`inner`** ‚Äî –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ (INNER JOIN):
    - **`source`** ‚Äî –∏–º—è –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –≤—Ç–æ—Ä–æ–π —Ç–∞–±–ª–∏—Ü—ã.
    - **`schema`** ‚Äî —Å—Ö–µ–º–∞ –≤—Ç–æ—Ä–æ–π —Ç–∞–±–ª–∏—Ü—ã.
    - **`table`** ‚Äî –∏–º—è —Ç–∞–±–ª–∏—Ü—ã.
    - **`column_first`** ‚Äî –∫–æ–ª–æ–Ω–∫–∞ –∏–∑ –æ—Å–Ω–æ–≤–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã (`main_table` –∏–ª–∏ –ø–µ—Ä–≤–æ–π –≤ —Å–ø–∏—Å–∫–µ).
    - **`column_second`** ‚Äî –∫–æ–ª–æ–Ω–∫–∞ –∏–∑ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω—è–µ–º–æ–π —Ç–∞–±–ª–∏—Ü—ã.
## üß± –õ–æ–≥–∏–∫–∞ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–π

InsightForge –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≥–∏–±–∫—É—é —Å–∏—Å—Ç–µ–º—É —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–π –¥–ª—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è —Ü–µ–ª–µ–≤—ã—Ö –∫–æ–ª–æ–Ω–æ–∫:
FieldTransform ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏–π –ø–æ–ª—è —Å —Ç–µ–∫—Å—Ç–æ–≤—ã–º–∏ –ª–µ–π–±–ª–∞–º–∏ (enum-–ø–æ–¥–æ–±–Ω—ã–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è).
JSON ‚Äî –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å JSONB-–ø–æ–ª—è –∏ –≤—ã—Ç–∞—â–∏—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤ –∫–æ–ª–æ–Ω–∫–∏ –≤—å—é—Ö–∏. –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø–æ–ª—è mapping_json, –≥–¥–µ —É–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ç–∏–ø –¥–∞–Ω–Ω—ã—Ö –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –∫–ª—é—á ‚Üí –∏–º—è –∫–æ–ª–æ–Ω–∫–∏.

## üì¶ –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è
–î–ª—è –∑–∞–ø—É—Å–∫–∞ InsightForge –∏ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã CDC —á–µ—Ä–µ–∑ Debezium, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:

‚úÖ –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Å–µ—Ä–≤–∏—Å—ã
- `Kafka`
- `Zookeeper`
- `Kafka Connect (—Å Debezium Connector for PostgreSQL)`
- `PostgreSQL ‚Äî –¥–ª—è –∏—Å—Ç–æ—á–Ω–∏–∫–∞ (OLTP); –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –∏ –∫–∞–∫ DWH`
- `ClickHouse ‚Äî –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ DWH`


## üß© –ù–∞—Å—Ç—Ä–æ–π–∫–∏ PostgreSQL (–¥–ª—è CDC)
–î–ª—è –∫–∞–∂–¥–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ (OLTP PostgreSQL), –ø–æ–¥–∫–ª—é—á–∞–µ–º–æ–≥–æ –∫ Debezium, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ:
1. –í–∫–ª—é—á–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π (WAL)
–í postgresql.conf:
- `wal_level = logical`
- `max_replication_slots = 4`
- `max_wal_senders = 4`
2. –°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –Ω—É–∂–Ω—ã–º–∏ –ø—Ä–∞–≤–∞–º–∏
```
```sql
  CREATE ROLE replication_user WITH REPLICATION LOGIN PASSWORD 'password';
  GRANT SELECT ON ALL TABLES IN SCHEMA public TO replication_user;
  ALTER DEFAULT PRIVILEGES IN SCHEMA public GRANT SELECT ON TABLES TO replication_user;
  ```

3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å REPLICA IDENTITY FULL –¥–ª—è –≤—Å–µ—Ö –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º—ã—Ö —Ç–∞–±–ª–∏—Ü
```
```sql
ALTER TABLE public.users REPLICA IDENTITY FULL;
ALTER TABLE public.profiles REPLICA IDENTITY FULL;
```

## üõ∞ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç Kafka –∏ Debezium
–ü—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ `analytics-data-center` –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `cdc-listener`, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ –±—Ä–æ–∫–µ—Ä—É Kafka. Debezium —á–µ—Ä–µ–∑ Kafka Connect —Å—á–∏—Ç—ã–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏–∑ OLTP –±–∞–∑—ã –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∏—Ö –≤ —Ç–æ–ø–∏–∫–∏. –ö–∞–∫ —Ç–æ–ª—å–∫–æ –≤ —Å–∏—Å—Ç–µ–º–Ω–æ–π —Ç–∞–±–ª–∏—Ü–µ Schemas –ø–æ—è–≤–ª—è–µ—Ç—Å—è –Ω–æ–≤–∞—è —Å—Ö–µ–º–∞, –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ —Ç–æ–ø–∏–∫–∏ –∏ –Ω–∞—á–∏–Ω–∞–µ—Ç –ø–æ—Ç—Ä–µ–±–ª—è—Ç—å —Å–æ–±—ã—Ç–∏—è.

–°–Ω–∞—á–∞–ª–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å—á–∏—Ç—ã–≤–∞–µ—Ç –≤—Å—é –Ω–∞–∫–æ–ø–∏–≤—à—É—é—Å—è –∏—Å—Ç–æ—Ä–∏—é —Å–æ–æ–±—â–µ–Ω–∏–π, –ø–æ—ç—Ç–æ–º—É —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Å—Ö–µ–º—ã –≤–æ–∑–º–æ–∂–Ω—ã –Ω–µ–±–æ–ª—å—à–∏–µ –∑–∞–¥–µ—Ä–∂–∫–∏. –ö–æ–≥–¥–∞ –æ—á–µ—Ä–µ–¥—å –±—É–¥–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∞–Ω–∞, —Å–æ–±—ã—Ç–∏—è –Ω–∞—á–Ω—É—Ç –ø—Ä–∏—Ö–æ–¥–∏—Ç—å –ø–æ—á—Ç–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏. Kafka –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –ø–æ—Ä—è–¥–æ–∫ –¥–æ—Å—Ç–∞–≤–∫–∏ –≤–Ω—É—Ç—Ä–∏ —Ä–∞–∑–¥–µ–ª–∞, –∞ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç —Å–º–µ—â–µ–Ω–∏—è, —á—Ç–æ–±—ã –Ω–µ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è.


## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –∑–∞–ø—É—Å–∫
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ —Ñ–∞–π–ª–µ `analytics-data-center/config/local.yaml` –∏ —Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –ø–∞–∫–µ—Ç–æ–º `internal/config`.
- –ó–∞–ø—É—Å–∫ –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è –∏–∑ `cmd/analytics-data-center/main.go`. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–¥–Ω–∏–º–∞–µ—Ç HTTP —Å–µ—Ä–≤–µ—Ä –Ω–∞ –ø–æ—Ä—Ç—É `8888` –∏ gRPC —Å–µ—Ä–≤–µ—Ä –Ω–∞ –ø–æ—Ä—Ç—É, —É–∫–∞–∑–∞–Ω–Ω–æ–º –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä–µ `grpc.port`.
- –ü—É—Ç—å –∫ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ —Ñ–ª–∞–≥ `--config` –∏–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è `CONFIG_PATH`.
- –°–æ–±—Ä–∞—Ç—å –±–∏–Ω–∞—Ä–Ω–∏–∫ –º–æ–∂–Ω–æ –∫–æ–º–∞–Ω–¥–æ–π:
```bash
go build ./analytics-data-center/cmd/analytics-data-center
```
